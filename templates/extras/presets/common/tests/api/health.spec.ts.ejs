import { expect, test } from '@fixtures';
import { APIResponse } from '@playwright/test';

test.use({
  apiServiceOptions: {
    apiHeaders: { Authorization: 'Bearer token' },
    log: true,
  },
});

test(
  'Health check should return OK',
  { tag: ['@smoke', '@regression'] },
  async ({ apiService }) => {
    let response: APIResponse;

    await test.step('Call /health endpoint', async () => {
      response = await apiService.get('/health');
    });

    await test.step('Verify health response', async () => {
      expect(response.status()).toBe(200);
      const body = await response.json();
      expect(body.status).toBe('OK');
    });
  },
);
