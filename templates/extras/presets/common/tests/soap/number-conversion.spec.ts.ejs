import { expect, test } from '@fixtures';

test.use({
  soapServiceOptions: {
    url: 'https://www.dataaccess.com/webservicesserver/NumberConversion.wso',
    log: true,
  },
});

test(
  'SOAP NumberConversion NumberToWords returns a non-empty string',
  { tag: ['@smoke', '@regression'] },
  async ({ soapService, soapData }) => {
    let result: { status: number; rawBody?: string; parsed?: string };

    await test.step('Call NumberToWords operation', async () => {
      result = await soapService.call<string>(soapData.numberConversion.numberToWords);
    });

    await test.step('Verify NumberToWords response', async () => {
      expect(result.status).toBe(200);
      expect(typeof result.parsed).toBe('string');
      expect((result.parsed as string).length).toBeGreaterThan(0);
    });
  },
);

test(
  'SOAP NumberConversion NumberToDollars returns a non-empty string',
  { tag: ['@smoke', '@regression'] },
  async ({ soapService, soapData }) => {
    let result: { status: number; rawBody?: string; parsed?: string };

    await test.step('Call NumberToDollars operation', async () => {
      result = await soapService.call<string>(soapData.numberConversion.numberToDollars);
    });

    await test.step('Verify NumberToDollars response', async () => {
      expect(result.status).toBe(200);
      expect(typeof result.parsed).toBe('string');
      expect((result.parsed as string).length).toBeGreaterThan(0);
    });
  },
);
