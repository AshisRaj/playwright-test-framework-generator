/* eslint-disable @typescript-eslint/no-explicit-any */
import axios from 'axios';

/**
 * Base API client for Playwright tests
 */
export const api = axios.create({
  baseURL: process.env.API_BASE_URL || process.env.API_BASE_URL || 'http://localhost:3000',
  timeout: 30_000,
});

// Tag API calls in Allure reports if available
api.interceptors.request.use((cfg) => {
  return cfg;
});

// Optional: log errors globally (extend as needed)
api.interceptors.response.use(
  (res) => res,
  (err) => {
    console.error(`[API ERROR] ${err?.config?.url ?? 'unknown'}`, err.message);
    throw err;
  },
);
